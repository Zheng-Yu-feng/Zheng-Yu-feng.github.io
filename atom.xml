<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Yufeng&#39;s blog</title>
  <icon>https://www.gravatar.com/avatar/2789dc0497448f0e77e0bc6edfcb5435</icon>
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2025-12-19T08:53:16.842Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>Zheng Yufeng</name>
    <email>3054661346@qq.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>DYY</title>
    <link href="http://example.com/2025/12/19/DYY/"/>
    <id>http://example.com/2025/12/19/DYY/</id>
    <published>2025-12-19T08:49:36.000Z</published>
    <updated>2025-12-19T08:53:16.842Z</updated>
    
    <content type="html"><![CDATA[<h2 id="水印算法集成"><a href="#水印算法集成" class="headerlink" title="水印算法集成"></a>水印算法集成</h2><p><img src="/image/image-20251219162133738.png" alt="image-20251219162133738"></p><h3 id="1、集成框架"><a href="#1、集成框架" class="headerlink" title="1、集成框架"></a>1、集成框架</h3><p>这是一个基于<strong>工厂模式</strong>+<strong>模板方法模式</strong>+<strong>策略模式</strong> 的大语言模型水印框架。设计上借鉴了Hugging Face Transformers的AutoClass机制，专门针对水印算法场景进行了定制。</p><p>（1）核心组件：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 架构组件关系</span></span><br><span class="line">├── config/                          <span class="comment"># JSON配置文件目录</span></span><br><span class="line">│   ├── algorithm_a_config.json</span><br><span class="line">│   └── algorithm_b_config.json</span><br><span class="line">└── watermarks/                      <span class="comment"># 算法目录</span></span><br><span class="line">    ├── algorithm_a/</span><br><span class="line">    │   ├── __init__.py</span><br><span class="line">    │   └── watermark_a.py <span class="comment">#算法实现及参数配置</span></span><br><span class="line">    └── algorithm_b/</span><br><span class="line">    │   ├── __init__.py</span><br><span class="line">    │   └── watermark_b.py</span><br><span class="line">    ...</span><br><span class="line">    ├── auto_config.py<span class="comment"># AutoConfig工厂</span></span><br><span class="line">    ├── auto_watermark.py <span class="comment"># AutoWatermark工厂</span></span><br><span class="line">    └── base.py<span class="comment"># Base基类</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># watermark_a.py:</span></span><br><span class="line">├── <span class="keyword">class</span> <span class="title class_">aConfig</span>(<span class="title class_ inherited__">BaseConfig</span>)</span><br><span class="line">│   ├── <span class="keyword">def</span> <span class="title function_">initialize_parameters</span>(<span class="params">self</span>)</span><br><span class="line">└── <span class="keyword">class</span> <span class="title class_">aWatermark</span>(<span class="title class_ inherited__">BaseWatermark</span>)</span><br><span class="line">    ├── <span class="keyword">def</span> <span class="title function_">generate</span>(<span class="params">prompt</span>)</span><br><span class="line">    └── <span class="keyword">def</span> <span class="title function_">detect</span>(<span class="params">text</span>)</span><br></pre></td></tr></table></figure><p><img src="/image/DYY%E4%BB%A3%E7%A0%81%E9%80%BB%E8%BE%91%E7%BB%98%E5%9B%BE2.jpg" alt="DYY代码逻辑绘图2"></p><p>（2）<strong>设计特点：</strong></p><ol><li><strong>双重工厂加载机制</strong><ul><li>AutoConfig作为配置工厂，负责加载和初始化算法配置</li><li>AutoWatermark作为算法工厂，负责实例化具体的水印算法</li><li>两者配合实现算法与配置的分离管理</li></ul></li><li><strong>模板方法模式</strong><ul><li>BaseConfig定义配置加载的标准流程</li><li>具体算法通过重写initialize_parameters()实现自定义初始化</li><li>确保所有算法配置具有一致的初始化过程</li></ul></li><li><strong>策略模式</strong><ul><li>BaseWatermark定义水印算法的嵌入与检测（generate&#x2F;detect）</li><li>所有算法重写嵌入与检测过程，满足于算法自身逻辑</li></ul></li><li><strong>插件化算法管理</strong><ul><li>每个算法独立封装为模块，包含Config和Watermark实现</li><li>支持手动注册新算法，扩展性强</li><li>统一的算法接口便于比较和替换不同水印技术</li></ul></li></ol><p>（3）<strong>大致流程：</strong></p><p>a）初始化阶段</p><ul><li><p>用户需要选择某个算法并配置TransformersConfig ，包括：模型&#x2F;分词器&#x2F;生成长度等参数。TransformersConfig需要适配具体的服务场景。</p></li><li><p>调用AutoConfig.load(）执行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">module = importlib.import_module(module_name)</span><br><span class="line">config_class = <span class="built_in">getattr</span>(module, class_name)</span><br><span class="line">config_instance = config_class(algorithm_config_path, transformers_config)</span><br></pre></td></tr></table></figure><ul><li>根据algorithm_name动态导入对应config模块</li><li>实例化算法特定的Config类(继承BaseConfig)</li><li>BaseConfig.init():<ul><li>保存transformers_config引用</li><li>从config&#x2F;目录加载对应JSON配置文件</li><li>调用self.initialize_parameters() ，其由子类实现</li></ul></li><li>返回完全初始化的Config实例</li></ul></li><li><p>调用AutoWatermark.load() 执行：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">watermark_config = AutoConfig.load(algorithm_name, transformers_config, algorithm_config_path=algorithm_config)</span><br><span class="line">module = importlib.import_module(module_name)</span><br><span class="line">watermark_class = <span class="built_in">getattr</span>(module, class_name)</span><br><span class="line">watermark_instance = watermark_class(watermark_config)</span><br></pre></td></tr></table></figure><ul><li>根据algorithm_name动态导入算法模块</li><li>实例化算法类，传入Config实例，算法内部实例设置: self.config &#x3D; config</li><li>返回初始化的watermark实例</li></ul></li></ul><p>b)  嵌入与检测阶段</p><ul><li>构建prompt：<br>在具体服务场景下，添加合适的前缀信息。如在翻译场景下，添加：”translate to zh:”等</li><li>使用初始化阶段的watermark实例执行嵌入与检测操作：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">watermarked_text = watermark_instance.generate_watermarked_text(prompt)</span><br><span class="line">detect_result = watermark_instance.detect_watermark(watermarked_text)</span><br></pre></td></tr></table></figure><p>（4）效果展示：</p><p><img src="/image/image-20251219161834841.png" alt="image-20251219161834841"></p><h3 id="2、算法分类（单比特、多比特、隐写）"><a href="#2、算法分类（单比特、多比特、隐写）" class="headerlink" title="2、算法分类（单比特、多比特、隐写）"></a>2、算法分类（单比特、多比特、隐写）</h3><p><strong>单比特水印算法：</strong></p><table><thead><tr><th>算法名称</th><th>来源</th></tr></thead><tbody><tr><td>KGW</td><td>[<a href="https://arxiv.org/abs/2301.10226">2301.10226] A Watermark for Large Language Models (arxiv.org)</a></td></tr><tr><td>Unigram</td><td>[ <a href="https://arxiv.org/abs/2306.17439">2306.17439] Provable Robust Watermarking for AI-Generated Text (arxiv.org)</a></td></tr><tr><td>EWD</td><td>[<a href="https://arxiv.org/abs/2403.13485">2403.13485] An Entropy-based Text Watermarking Detection Method (arxiv.org)</a></td></tr><tr><td>DIP</td><td>[<a href="https://arxiv.org/abs/2310.07710">2310.07710] A Resilient and Accessible Distribution-Preserving Watermark for Large Language Models (arxiv.org)</a></td></tr><tr><td>Unbiased</td><td>[ <a href="https://arxiv.org/abs/2310.10669">2310.10669] Unbiased Watermark for Large Language Models (arxiv.org)</a></td></tr><tr><td>SynthID</td><td><a href="https://www.nature.com/articles/s41586-024-08025-4">Scalable Watermarking for Identifying Large Language Model Outputs (<em>Nature</em>)</a></td></tr><tr><td>MCMark</td><td><a href="https://www.arxiv.org/pdf/2502.11268">Improved Unbiased Watermark for Large Language Models</a></td></tr><tr><td>SPO</td><td>团队自研（投稿中）</td></tr><tr><td>WR</td><td>团队自研（投稿中）</td></tr></tbody></table><p><strong>多比特水印算法：</strong></p><table><thead><tr><th>算法名称</th><th>来源</th></tr></thead><tbody><tr><td>CycleShift</td><td>[<a href="https://arxiv.org/abs/2308.00113">2308.00113] Three Bricks to Consolidate Watermarks for Large Language Models</a></td></tr><tr><td>SGO</td><td>团队自研（投稿中）</td></tr><tr><td>MEXPEdit</td><td>团队自研（投稿中）</td></tr></tbody></table><p><strong>隐写算法：</strong></p><table><thead><tr><th>算法名称</th><th>来源</th></tr></thead><tbody><tr><td>Arithmetic</td><td>[<a href="https://arxiv.org/abs/1909.01496">1909.01496] Neural Linguistic Steganography</a></td></tr><tr><td>Meteor</td><td>[Meteor: Cryptographically Secure Steganography for Realistic Distributions</td></tr><tr><td>SparSamp<br />团队自研</td><td>[[2503.19499] SparSamp: Efficient Provably Secure Steganography Based on Sparse Sampling](</td></tr></tbody></table>]]></content>
    
    
    <summary type="html">大语言模型水印展示平台</summary>
    
    
    
    <category term="project" scheme="http://example.com/categories/project/"/>
    
    
    <category term="LLM" scheme="http://example.com/tags/LLM/"/>
    
  </entry>
  
  <entry>
    <title>你好</title>
    <link href="http://example.com/2025/12/18/%E6%B5%8B%E8%AF%95%E5%86%85%E5%AE%B9/"/>
    <id>http://example.com/2025/12/18/%E6%B5%8B%E8%AF%95%E5%86%85%E5%AE%B9/</id>
    <published>2025-12-17T16:00:00.000Z</published>
    <updated>2025-12-18T05:24:57.883Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ceshi"><a href="#ceshi" class="headerlink" title="ceshi"></a>ceshi</h2><p>hhhh</p>]]></content>
    
    
    <summary type="html">这是一个测试</summary>
    
    
    
    <category term="good1" scheme="http://example.com/categories/good1/"/>
    
    
    <category term="test1" scheme="http://example.com/tags/test1/"/>
    
  </entry>
  
  <entry>
    <title>test</title>
    <link href="http://example.com/2025/05/21/test/"/>
    <id>http://example.com/2025/05/21/test/</id>
    <published>2025-05-21T11:31:23.000Z</published>
    <updated>2025-05-21T12:45:09.869Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2025/05/21/test/wallhaven-7633zy.jpg"></p><p>图片测试</p><p>$$<br>i\hbar\frac{\partial}{\partial t}\psi&#x3D;-\frac{\hbar^2}{2m}\nabla^2\psi+V\psi<br>$$<br>行间公式$O(f(n))&#x3D;log_2^{n}$测试</p><p>dd</p><p><img src="/2025/05/21/test/wallhaven-yxorx7.jpg"></p><p>dd</p><p><img src="/2025/05/21/test/wallhaven-9dg5g8.jpg"></p><p>这是一个复杂的数学公式：</p><p>$$<br>\int_{-\infty}^{\infty} e^{-x^2} dx &#x3D; \sqrt{\pi}<br>$$</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;/2025/05/21/test/wallhaven-7633zy.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;图片测试&lt;/p&gt;
&lt;p&gt;$$&lt;br&gt;i&#92;hbar&#92;frac{&#92;partial}{&#92;partial t}&#92;psi&amp;#x3D;-&#92;frac{&#92;hbar^2}{2m}</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://example.com/2025/05/21/network/"/>
    <id>http://example.com/2025/05/21/network/</id>
    <published>2025-05-21T11:18:30.013Z</published>
    <updated>2025-05-21T12:32:27.245Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2025/05/21/network/wallhaven-qzxgmr.png"></p><p>hhh</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;/2025/05/21/network/wallhaven-qzxgmr.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;hhh&lt;/p&gt;
</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://example.com/2025/05/20/hello-world/"/>
    <id>http://example.com/2025/05/20/hello-world/</id>
    <published>2025-05-20T02:52:43.370Z</published>
    <updated>2025-05-20T02:37:28.681Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
</feed>
